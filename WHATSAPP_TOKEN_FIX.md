# ๐ง ุฅุตูุงุญ ูุดููุฉ WhatsApp Access Token

## โ **ุงููุดููุฉ:**
```
Invalid OAuth access token - Cannot parse access token
```

ูุฐุง ุงูุฎุทุฃ ูุนูู ุฃู ุงูู Access Token ููุชูู ุงูุตูุงุญูุฉ ุฃู ุบูุฑ ุตุญูุญ.

---

## โ **ุงูุญู ุงูุณุฑูุน - ุฎุทูุฉ ุจุฎุทูุฉ:**

### **1๏ธโฃ ุงุญุตู ุนูู Token ุฌุฏูุฏ:**

#### **ุงูุทุฑููุฉ ุงูุณุฑูุนุฉ (Temporary Token - ุตุงูุญ 24 ุณุงุนุฉ):**
1. ุงูุชุญ: https://developers.facebook.com/apps
2. ุงุฎุชุฑ ุชุทุจููู
3. ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ: **WhatsApp** โ **API Setup**
4. ุงูุณุฎ ุงูู **"Temporary access token"** (ุนุงุฏุฉ ููุฌูุฏ ูู ุงูุฃุนูู)
5. ุงูุตู Token ุงูุฌุฏูุฏ ูู Figma Make โ Secrets โ `WHATSAPP_ACCESS_TOKEN`

#### **ุงูุทุฑููุฉ ุงูุฏุงุฆูุฉ (System User Token - ูุง ููุชูู):**
1. ุงูุชุญ: https://business.facebook.com/settings/system-users
2. ุงุถุบุท **Add** โ ุฃูุดุฆ System User
3. ุงุถุบุท **Generate New Token**
4. ุงุฎุชุฑ ุงูุชุทุจูู ุงูุฎุงุต ุจู
5. ุญุฏุฏ ุงูุตูุงุญูุงุช: `whatsapp_business_messaging`, `whatsapp_business_management`
6. ุงูุณุฎ ุงูู Token
7. ุงูุตู Token ุงูุฌุฏูุฏ ูู Figma Make โ Secrets โ `WHATSAPP_ACCESS_TOKEN`

---

### **2๏ธโฃ ุงุฎุชุจุฑ ุงูุงุชุตุงู:**

ุงูุชุญ ูู ุงููุชุตูุญ:
```
https://[PROJECT_ID].supabase.co/functions/v1/make-server-273c94cc/test-whatsapp
```

**ุงุณุชุจุฏู `[PROJECT_ID]` ุจู Project ID ุงูุฎุงุต ุจู**

ุฅุฐุง ูุงู Token ุตุญูุญุ ุณุชุญุตู ุนูู:
```json
{
  "success": true,
  "message": "WhatsApp connection is working!",
  "messageId": "wamid.xxx..."
}
```

---

### **3๏ธโฃ ุชุญูู ูู ุฌููุน ุงูุฅุนุฏุงุฏุงุช:**

ุงูุชุญ ูู ุงููุชุตูุญ:
```
https://[PROJECT_ID].supabase.co/functions/v1/make-server-273c94cc/debug-secrets
```

ุชุฃูุฏ ูู:
- โ `WHATSAPP_ACCESS_TOKEN`: ูุฌุจ ุฃู ูููู ุทููู > 100 ุญุฑู
- โ `WHATSAPP_PHONE_NUMBER_ID`: ุฑูู Phone Number ID ูู WhatsApp
- โ `WHATSAPP_RECIPIENT_PHONE`: ุฑูู ุงููุงุชู ุงูุฐู ุณุชุณุชูู ุนููู ุงูุฑุณุงุฆู (ุจุตูุบุฉ ุฏูููุฉุ ูุซุงู: `212612345678`)

---

## ๐ **ูุนูููุงุช ูููุฉ:**

### **ุงููุฑู ุจูู Temporary ู System User Token:**

| **Temporary Token** | **System User Token** |
|---------------------|----------------------|
| โฐ ุตุงูุญ ูู 24 ุณุงุนุฉ ููุท | โ ุตุงูุญ ููุฃุจุฏ |
| ๐ ุณุฑูุน ููุญุตูู ุนููู | ๐๏ธ ูุญุชุงุฌ ุฅุนุฏุงุฏ |
| ๐งช ููุงุณุจ ููุชุฌุฑุจุฉ | ๐ข ููุงุณุจ ููุฅูุชุงุฌ |
| โ ูุฌุจ ุชุฌุฏูุฏู ููููุงู | โ ูุง ูุญุชุงุฌ ุชุฌุฏูุฏ |

---

## ๐ฑ **ุฃูู ุชุฌุฏ Phone Number IDุ**

1. ุงูุชุญ: https://developers.facebook.com/apps
2. ุงุฎุชุฑ ุชุทุจููู
3. **WhatsApp** โ **API Setup**
4. ุณุชุฌุฏ **"Phone number ID"** ุชุญุช ุฑูู ุงููุงุชู
5. ูุซุงู: `123456789012345`

---

## โ๏ธ **ุฃุฎุทุงุก ุดุงุฆุนุฉ:**

### โ **Token ูุตูุฑ ุฌุฏุงู:**
ุฅุฐุง ูุงู Token ุฃูู ูู 50 ุญุฑูุ ููู ุบูุฑ ุตุญูุญ.
- ุงูุญู: ุงุญุตู ุนูู Token ุฌุฏูุฏ

### โ **Token ููู ูุณุงูุงุช:**
ุชุฃูุฏ ุฃู Token ูุง ูุญุชูู ุนูู ูุณุงูุงุช ูู ุงูุจุฏุงูุฉ ุฃู ุงูููุงูุฉ.
- ุงูุญู: ุงููุธุงู ููุธู Token ุชููุงุฆูุงูุ ููู ุชุฃูุฏ ูู ุงููุณุฎ ุจุดูู ุตุญูุญ

### โ **ุฑูู ุงููุงุชู ุฎุงุทุฆ:**
ูุฌุจ ุฃู ูููู `WHATSAPP_RECIPIENT_PHONE` ุจุตูุบุฉ ุฏูููุฉ ุจุฏูู `+` ุฃู `-`
- โ ุตุญูุญ: `212612345678`
- โ ุฎุงุทุฆ: `+212 6 12 34 56 78`
- โ ุฎุงุทุฆ: `0612345678`

---

## ๐ฏ **ุฎุทูุงุช ุงูุชุญูู ุงูููุงุฆูุฉ:**

1. โ ุงุญุตู ุนูู **System User Token** ุฌุฏูุฏ
2. โ ุญุฏุซู ูู Figma Make Secrets
3. โ ุงุฎุชุจุฑ ุนุจุฑ `/test-whatsapp`
4. โ ุฃุฑุณู ุทูุจ ุนุฑุถ ุณุนุฑ ุฌุฏูุฏ
5. โ ุชุญูู ูู ูุตูู ุงูุฑุณุงูุฉ ุนูู WhatsApp

---

## ๐ **ูุง ุฒูุช ุจุญุงุฌุฉ ููุณุงุนุฏุฉุ**

ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ ุจุนุฏ ุชุทุจูู ุฌููุน ุงูุฎุทูุงุช:

1. ุชุญูู ูู Logs ูู Supabase:
   - ุงูุชุญ Supabase Dashboard
   - Edge Functions โ Logs
   - ุงุจุญุซ ุนู ุฑุณุงุฆู ุงูุฎุทุฃ

2. ุชุฃูุฏ ูู ุฃู ุฑูู WhatsApp ููุนูู ูู Facebook Developer:
   - ูุฌุจ ุฃู ูููู verified
   - ูุฌุจ ุฃู ูููู connected ููุชุทุจูู

---

## ๐ **ุงููุธุงู ุงูุขู ุฌุงูุฒ!**

ุจุนุฏ ุฅุตูุงุญ Tokenุ ุณูุนูู ุงููุธุงู ุจุดูู ุตุญูุญ:
- โ **Email:** ููุฑุณู ุชููุงุฆูุงู ูุน ุชุตููู Excel
- โ **WhatsApp:** ููุฑุณู ุฅุดุนุงุฑ ููุฑู
- โ **Database:** ูุญูุธ ุฌููุน ุงูุจูุงูุงุช

**ุญุธ ุณุนูุฏ! ๐**
